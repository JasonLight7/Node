<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body onload="butacas();">
    <main></main>
       <div id="titulodelapelicula"> </div>
       <div id="ContenedorAsientos"> 
           <span id="Nombre"> Nombre </span>
           <input type="text" name="nombre" placeholder="Digita tu nombre" id="nombre">
             <hr>
           <span id="Seccion"> Seccion </span>
           <input type="text" name="seccion" placeholder="Digita tu seccion" id="seccion">
           <hr>
           <span id="Carnet"> Carnet </span>
             <input type="text" name="carnet" placeholder="Digita tu carnet" id="carnet">
           <button onclick="GuardarAsientos()">Guardar</button>
           <button onclick="CerrarAsientos()"> Cerrar</button>
           <button onclick="LimpiarAsientos()"> Limpiar</button>
      </div>
  </body>
</html>
<script>
  let idbutaca;
  function make2DArray(cols, rows) {
    let arr = new Array(cols);
    for (let i = 0; i < arr.length; i++) {
      arr[i] = new Array(rows);
    }
    return arr;
  }
    function displayDate(idb){
        document.getElementById("ContenedorAsientos").style.display="block";
        idbutaca = idb;
    }   
    function CerrarAsientos(){
        document.getElementById("ContenedorAsientos").style.display="none";
    }
     function LimpiarAsientos(){
        document.getElementById("nombre").value="";
          document.getElementById("seccion").value="";
          document.getElementById("carnet").value="";
    
    }
    function GuardarAsientos(){
      cargadatosdelabutaca(idbutaca);
    
    }
  function butacas() {
      cargardatosdelapelicula();
    let main = document.querySelector("main");
    let butacas = make2DArray(6, 8);
    for (let j = 0; j < 8; j++) {
      for (let i = 0; i < 6; i++) {
        if (!((i == 4 || i == 5) && j < 4)) {
          let butaca = document.createElement("div");
          switch (j) {
            case 0:
              butaca.id += "H";
              break;
            case 1:
              butaca.id += "G";
              break;
            case 2:
              butaca.id += "F";
              break;
            case 3:
              butaca.id += "E";
              break;
            case 4:
              butaca.id += "D";
              break;
            case 5:
              butaca.id += "C";
              break;
            case 6:
              butaca.id += "B";
              break;
            case 7:
              butaca.id += "A";
              break;
          }
          butaca.id += i + 1;
          main.appendChild(butaca);
          butaca.style.gridColumn = i + 1;
          butaca.style.gridRow = j + 1;
          butaca.innerHTML = butaca.id;
          butaca.className += "butaca";
          butaca.addEventListener("click",function(){displayDate(butaca.id)});
        }
        if (j < 4) {
          console.log("hola");
        }
      }
    }
  }
    function cargardatosdelapelicula()
    
    {
        
        var pelicula = JSON.parse(localStorage.getItem('peliculaseleccionada'))
        
        document.getElementById("titulodelapelicula").innerHTML += pelicula[0].NOMBRE + "<hr><p>Tanda: "+pelicula[0].FECHA+ " Inicia: "+pelicula[0].HORAINICIO +": "+pelicula[0].MINUTOINICIO+"<p/>";
        
        
        
        
    }
    
    
    
      function cargadatosdelabutaca(iddelabutaca)
{
         //el id de la butaca se los pasa como parametro desde el modal al que presiono guardar
    var peliculaencache = JSON.parse(localStorage.getItem('peliculaseleccionada'))
    switch(iddelabutaca) {  
case "A1":
                peliculaencache[0].ASIENTOS.A1.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.A1.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.A1.SECCION= document.getElementById("seccion").value;
                break;
                   
           
            
case "A2":
               peliculaencache[0].ASIENTOS.A2.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.A2.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.A2.SECCION= document.getElementById("seccion").value;
                break;
       

                  
case "A3":         

              peliculaencache[0].ASIENTOS.A3.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.A3.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.A3.SECCION= document.getElementById("seccion").value;
                break;

case "A4":
               peliculaencache[0].ASIENTOS.A4.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.A4.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.A4.SECCION= document.getElementById("seccion").value;
                break;


case "A5":
             peliculaencache[0].ASIENTOS.A5.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.A5.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.A5.SECCION= document.getElementById("seccion").value;
                break;


case "A6":
             peliculaencache[0].ASIENTOS.A6.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.A6.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.A6.SECCION= document.getElementById("seccion").value;
                break;

//Asientos de la A1 a la A6//
case "B1":                
                peliculaencache[0].ASIENTOS.B1.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.B1.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.B1.SECCION= document.getElementById("seccion").value;
                break;

case "B2":                
                peliculaencache[0].ASIENTOS.B2.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.B2.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.B2.SECCION= document.getElementById("seccion").value;
                break;


case "B3":                
                peliculaencache[0].ASIENTOS.B3.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.B3.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.B3.SECCION= document.getElementById("seccion").value;
                break;


case "B4":                
                peliculaencache[0].ASIENTOS.B4.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.B4.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.B4.SECCION= document.getElementById("seccion").value;
                break;

case "B5":                
                peliculaencache[0].ASIENTOS.B5.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.B5.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.B5.SECCION= document.getElementById("seccion").value;
                break;
case "B6":                
                peliculaencache[0].ASIENTOS.B6.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.B6.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.B6.SECCION= document.getElementById("seccion").value;
                break;

//Asientos de la B1 a la B6//

case "C1":                
                peliculaencache[0].ASIENTOS.C1.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.C1.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.C1.SECCION= document.getElementById("seccion").value;
                break;

case "C2":                
                peliculaencache[0].ASIENTOS.C2.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.C2.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.C2.SECCION= document.getElementById("seccion").value;
                break;
case "C3":                
                peliculaencache[0].ASIENTOS.C3.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.C3.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.C3.SECCION= document.getElementById("seccion").value;
                break;
case "C4":                
                peliculaencache[0].ASIENTOS.C4.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.C4.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.C4.SECCION= document.getElementById("seccion").value;
                break;

case "C5":                
                peliculaencache[0].ASIENTOS.C5.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.C5.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.C5.SECCION= document.getElementById("seccion").value;
                break;
case "C6":                
                peliculaencache[0].ASIENTOS.C6.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.C6.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.C6.SECCION= document.getElementById("seccion").value;
                break;
//Asientos de la C1 a la C6//
                  
case "D1":                
                peliculaencache[0].ASIENTOS.D1.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.D1.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.D1.SECCION= document.getElementById("seccion").value;
                break;
case "D2":                
                peliculaencache[0].ASIENTOS.D2.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.D2.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.D2.SECCION= document.getElementById("seccion").value;
                break;
case "D3":                
                peliculaencache[0].ASIENTOS.D3.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.D3.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.D3.SECCION= document.getElementById("seccion").value;
                break;
case "D4":                
                peliculaencache[0].ASIENTOS.D4.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.D4.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.D4.SECCION= document.getElementById("seccion").value;
                break;
case "D5":                
                peliculaencache[0].ASIENTOS.D5.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.D5.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.D5.SECCION= document.getElementById("seccion").value;
                break;

//Asientos de la D1 a la D5//
  
case "E1":                
                peliculaencache[0].ASIENTOS.E1.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.E1.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.E1.SECCION= document.getElementById("seccion").value;
                break;

case "E2":                
                peliculaencache[0].ASIENTOS.E2.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.E2.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.E2.SECCION= document.getElementById("seccion").value;
                break;

case "E3":                
                peliculaencache[0].ASIENTOS.E3.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.E3.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.E3.SECCION= document.getElementById("seccion").value;
                break;

case "E4":                
                peliculaencache[0].ASIENTOS.E4.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.E4.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.E4.SECCION= document.getElementById("seccion").value;
                break;
//Asientos de la E1 a la E4//
case "F1":                
                peliculaencache[0].ASIENTOS.F1.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.F1.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.F1.SECCION= document.getElementById("seccion").value;
                break;
case "F2":                
                peliculaencache[0].ASIENTOS.F2.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.F2.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.F2.SECCION= document.getElementById("seccion").value;
                break;
case "F3":                
                peliculaencache[0].ASIENTOS.F3.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.F3.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.F3.SECCION= document.getElementById("seccion").value;
                break;
case "F4":                
                peliculaencache[0].ASIENTOS.F4.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.F4.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.F4.SECCION= document.getElementById("seccion").value;
                break;

//Asientos de la F1 a la F4//
case "G1":                
                peliculaencache[0].ASIENTOS.G1.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.G1.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.G1.SECCION= document.getElementById("seccion").value;
                break;

case "G2":                
                peliculaencache[0].ASIENTOS.G2.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.G2.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.G2.SECCION= document.getElementById("seccion").value;
                break;
case "G3":                
                peliculaencache[0].ASIENTOS.G3.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.G3.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.G3.SECCION= document.getElementById("seccion").value;
                break;

case "G4":                
                peliculaencache[0].ASIENTOS.G4.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.G4.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.G4.SECCION= document.getElementById("seccion").value;
                break;


//Asientos de la G1 a la G4//
case "H1":                
                peliculaencache[0].ASIENTOS.H1.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.H1.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.H1.SECCION= document.getElementById("seccion").value;
                break;
case "H2":                
                peliculaencache[0].ASIENTOS.H2.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.H2.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.H2.SECCION= document.getElementById("seccion").value;
                break;
case "H3":                
                peliculaencache[0].ASIENTOS.H3.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.H3.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.H3.SECCION= document.getElementById("seccion").value;
                break;
                  
case "H4":                
                peliculaencache[0].ASIENTOS.H4.NOMBREESTUDIANTE= document.getElementById("nombre").value;
                peliculaencache[0].ASIENTOS.H4.CARNET= document.getElementById("carnet").value;
                peliculaencache[0].ASIENTOS.H4.SECCION= document.getElementById("seccion").value;
                break;


//Asientos de la H1 a la H4//

 }
     //deben tener linkeado el js de peliculafrontend
    var peliculainstanciada = new _Pelicula(peliculaencache[0]._id,peliculaencache[0].NOMBRE,
    peliculaencache[0].DURACIONMINUTOS,
    peliculaencache[0].GENERO,
    peliculaencache[0].IDIOMAAUDIO,
    peliculaencache[0].IDIOMASUB,
    peliculaencache[0].SINOPSIS,
    peliculaencache[0].CLASIFICACION,
    peliculaencache[0].PRECIO,
    peliculaencache[0].HORAINICIO,
    peliculaencache[0].FECHA,
    peliculaencache[0].MINUTOINICIO,
    peliculaencache[0].ASIENTOS,
    peliculaencache[0].IMAGEN,
    peliculaencache[0].ESTADO

    )
    
    peliculainstanciada.Modificar().then(function(response) {
  console.log("Success!", response);
            alert("Butaca ha sido reservada campeón");
            
}, function(error) {
  console.error("Failed!", error);
             alert("Error " + error);
            
});
       
    
}
    

    
</script>
<style>
  body {
    color:white;
    margin: 0;
    padding: 0;
    background: white;
  }
    input{
    margin-top: 10px;
    height:20px;
    color:black;
    margin: 0;
    padding: 5px;
    font-family: sans-serif;
    background: white;
  }
  main {
    display: grid;
    grid-template-columns: repeat(6, 50px);
    grid-auto-rows: 1fr;
    grid-column-gap: 10px;
    position: absolute;
    transform: translate(-50%, -50%);
    top: 50%;
    left: 50%;
  }
  div {
    height: 60px;
    background: rgba(6, 84, 180, 0.83);
    border: 1px solid white;
  }
  .butaca {
    margin-top: -10px;
    display: grid;
    justify-items: center;
    align-items: center;
    border-top-right-radius: 50px;
    border-top-left-radius: 50px;
    color: white;
  }
     #titulodelapelicula  {
         font-size: 25px;
         font-family: cursive;
          border: 3px solid #007effd4;
          border-radius: 15px;
          padding: 10px;
          font-size: 20px;
          font-family: cursive;
          width: 500px;
         height: 90px;
         margin:auto;
         margin-top: 10px;
        }
     #ContenedorAsientos
    {
          display: none;
          font-size: 15px;
          font-family: cursive;
          border: 3px solid #007effd4;
          border-radius: 15px;
          padding: 10px;
          font-size: 20px;
          font-family: cursive;
          width: 300px;
          height: 170px; 
          background: lightblue;
          color: black;
         margin:5px;
        
     
        }
      #nombre:focus
    {
          font-family: cursive;
          border: 3px solid #007effd4;
          background: white;
          color: black;
     
        }
    #seccion:focus
    {
          font-family: cursive;
          border: 3px solid #007effd4;
          background: white;
          color: black;
     
        }
    #carnet:focus
    {
          font-family: cursive;
          border: 3px solid #007effd4;
          background: white;
          color: black;
          margin-left: 10px;
     
        }
      #carnet
    {
        
          margin-left: 10px;
     
        }
     
</style>
<script src="clasePelicula.js"></script>
